<%= form_with(model: [:admin, product]) do |form| %>
	商品圖：<%= form.file_field :cover_image %><br />
  <%= image_tag form.object.cover_image.variant(resize: '480x480') if form.object.cover_image.attached? %>
  <hr />
  <div class="columns">
    <div class="column is-6">
      <div class="field">
        <%= form.label :name, '商品名稱', class: 'label' %>
        <%= form.text_field :name, class: 'input is-medium' %>
      </div>
    </div>
    <div class="column is-3">
      <div class="field">
        <%= form.label :vendor_id, '廠商', class: 'label' %>
        <div class="select is-medium is-fullwidth">
          <%= form.collection_select :vendor_id, Vendor.available, :id, :title %>
        </div>
      </div>
    </div>
    <div class="column is-3">
      <div class="field">
        <%= form.label :category_id, '分類', class: 'label' %>
        <div class="select is-medium is-fullwidth">
          <%= form.collection_select :category_id, Category.all, :id, :name %>
        </div>
      </div>
    </div>
  </div>

  <div class="columns">
    <div class="column is-3">
      <div class="field">
        <%= form.label :list_price, '定價', class: 'label' %>
        <%= form.number_field :list_price, class: 'input is-medium' %>
      </div>
    </div>
    <div class="column is-3">
      <div class="field">
        <%= form.label :sell_price, '售價', class: 'label' %>
        <%= form.number_field :sell_price, class: 'input is-medium' %>
      </div>
    </div>
        <div class="column is-6">
      <div class="field">
        <%= form.label :specification, '商品規格', class: 'label' %>
        <%= form.text_field :specification, class: 'input is-medium' %>
      </div>
    </div>
  </div>

  <div class="field">
    <%= form.check_box :on_sell %>
    <%= form.label :on_sell, '是否上架？', class: 'checkbox' %>
  </div>

  <div class="columns">
    <div class="column is-12">
      <div class="field">
        <%= form.label :description, '商品詳情', class: 'label' %>
        <%= form.rich_text_area :description, class: 'input is-medium' %>
      </div>
    </div>
  </div>
  <hr />
  <h2 class="subtitle">款式及庫存</h2>
  <div data-controller="product-subtype">
    <template data-product-subtype-target="template">
      <%= form.fields_for :skus, Sku.new, child_index: 'New_data' do |sku| %>
        <%= render 'sku_fields', form: sku %>
      <% end %>
    </template>
    <%= form.fields_for :skus do |sku_form| %>
      <%= render 'sku_fields', form: sku_form %>
    <% end %>
    <div data-product-subtype-target="adding">
      <%= link_to "新增款式", '#', class: 'button is-lishgt is-small', data: {action: 'product-subtype#add_sku'} %>
    </div>
  </div>

  <%= form.submit class: 'button is-primary is-medium' %>
<% end %>
